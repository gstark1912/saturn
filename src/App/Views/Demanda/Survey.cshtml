@model App.Models.Survey.SurveyViewModel
@{
    ViewBag.Title = "Obtener Recomendación";
}

<form action="/Evaluation/Save" method="post" class="" role="form" novalidate="novalidate">
    @Html.AntiForgeryToken()
    <div class="container sat-survey">

        @Html.HiddenFor(x => x.CategoryId)
        @Html.HiddenFor(x => x.SurveyId)
        @Html.ValidationMessage("Question")
        <div class="row sat-mailSurvey">
            <div class="col-md-offset-3 col-md-6">
                <div class="form-group alert alert-maker">
                    <label>Por favor ingrese su email para que podamos enviarle los resultados</label>
                    <input type="email" class="form-control" name="email" id="email" required value="@Model.Email" />
                    @Html.ValidationMessage("email")
                    <a class="sat-btn" href="#comienzo">Comenzar</a>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="sat-titlesOpening col-xs-12">
                <h2>@ViewBag.Title</h2>
                <h3 class="title-type">¿Qué esperás de tu producto o servicio?</h3>
            </div>
            <ol class="breadcrumb sat-breadcrumb">
                <li>Rubro</li>
                <li class="active">Evaluaci&oacute;n</li>
                <li>Registro</li>
                <li>Fin</li>
            </ol>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6">
                <a name="comienzo"></a>
                <h4 class="title-type" style="margin-top: 10px;">
                    Inicio de Evaluaci&oacute;n
                </h4>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-3 col-md-6">

                @{int i = 0;
                    int j = 0; }
                @foreach (var survey in Model.SurveyDTOs)
            {
                    <h4 class="sat-titleSurvey">
                        @survey.CategoryName
                    </h4>
                    <input type="hidden" name="SurveyDTOs[@j].SurveyId" value="@survey.SurveyId">
                    <input type="hidden" name="SurveyDTOs[@j].CategoryId" value="@survey.CategoryId">
                    foreach (var question in survey.SurveyQuestionDTOs)
                    {
                        if (!question.Old)
                        {
                            <input type="hidden" name="surveyCompletionDTOs[@i].QuestionId" value="@question.QuestionId">
                            <input type="hidden" name="surveyCompletionDTOs[@i].Question" value="@question.Question">
                            <input type="hidden" name="surveyCompletionDTOs[@i].SurveyId" value="@survey.SurveyId">
                            Html.RenderAction("Question", "Survey", new { id = question.QuestionId, identifier = i, surveyCompletionId = Model.SurveyCompletionId });
                            i++;
                        }
                    }
                    j++;
                }
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" class="btn btn-primary pull-right" name="action:Save" value="Finalizar Evaluación" />
                        <input type="submit" class="btn btn-primary pull-right" name="action:SaveParcial" value="Guardar y continuar luego" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}